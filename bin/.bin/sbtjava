#!/bin/sh
set -eu

if ! [ $# -eq 2 ]; then
  echo "Usage:"
  echo "sbtnew [organization name] [project name]"
else
  organizationName=$1
  directoryName=$2
  mkdir -p ${directoryName}/src/{main,test}/{java,resources}
  mkdir ${directoryName}/lib ${directoryName}/project ${directoryName}/target

  # build.sbt
  cat << EOF > ${directoryName}/build.sbt
organization := "$organizationName"
name := "$directoryName"
version := "1.0"
autoScalaLibrary := false
crossPaths := false
publishMavenStyle := true
javacOptions ++= Seq("-source", "1.8", "-target", "1.8")
libraryDependencies ++= Seq(
  "junit" % "junit" % "4.12" % "test",
  "com.novocode" % "junit-interface" % "0.11" % "test"
)
EOF

  # .gitignore
  cat << EOF > ${directoryName}/.gitignore
bin/
project/
target/
.cache
.classpath
.project
.settings
EOF

  cat << EOF > ${directoryName}/project/assembly.sbt
addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.14.3")
EOF

  # README.md
  touch ${directoryName}/README.md
fi
